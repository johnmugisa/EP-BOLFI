<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>ep_bolfi.utility.visualization.fit_and_plot_OCV &#8212; EP-BOLFI 3.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=110ea713"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ep_bolfi.utility.visualization.interactive_impedance_model" href="ep_bolfi.utility.visualization.interactive_impedance_model.html" />
    <link rel="prev" title="ep_bolfi.utility.visualization.colorline" href="ep_bolfi.utility.visualization.colorline.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ep-bolfi-utility-visualization-fit-and-plot-ocv">
<h1>ep_bolfi.utility.visualization.fit_and_plot_OCV<a class="headerlink" href="#ep-bolfi-utility-visualization-fit-and-plot-ocv" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="ep_bolfi.utility.visualization.fit_and_plot_OCV">
<span class="sig-prename descclassname"><span class="pre">ep_bolfi.utility.visualization.</span></span><span class="sig-name descname"><span class="pre">fit_and_plot_OCV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SOC</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OCV</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phases</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SOC_range_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.2,</span> <span class="pre">0.8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SOC_range_limits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.0,</span> <span class="pre">1.0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">298.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_SOC</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">1]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline_SOC_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0.01,</span> <span class="pre">0.99)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spline_print</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters_print</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inverted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_accuracy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">normalized_xaxis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distance_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minimize_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ep_bolfi.utility.visualization.fit_and_plot_OCV" title="Link to this definition">¶</a></dt>
<dd><p>Fits an SOC(OCV)-model and an OCV(SOC)-evaluable spline.</p>
<p>Exemplary fit parameters of a graphite anode:
``
E_0_g = np.array([0.35973, 0.17454, 0.12454, 0.081957])
γUeminus1_g = np.array([-0.33144, 8.9434e-3, 7.2404e-2, 6.7789e-2])
a_g = a_fit(γUeminus1_g)
Δx_g = np.array([8.041e-2, 0.23299, 0.29691, 0.39381])#0.22887
graphite = [p[i] for i in range(4) for p in [E_0_g, a_g, Δx_g]]
``
Exemplary fit parameters of an NMC-622 cathode:
``
E_0_NMC = np.array([4.2818, 3.9632, 3.9118, 3.6788])
γUeminus1_NMC = np.array([-0.22022, -0.083146, 0.070787, -0.11461])
a_NMC = a_fit(γUeminus1_NMC)
Δx_NMC = np.array([0.38646, 0.28229, 0.15104, 0.26562])#0.30105
NMC = [p[i] for i in range(4) for p in [E_0_NMC, a_NMC, Δx_NMC]]
``</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> – The <code class="docutils literal notranslate"><span class="pre">matplotlib.Axes</span></code> instance for plotting.</p></li>
<li><p><strong>SOC</strong> – Presumed SOC points of the OCV measurement. They only need to be
precise in respect to relative capacity between measurements.
The SOC endpoints of the measurement will be fitted using the
<code class="docutils literal notranslate"><span class="pre">fitting_functions.OCV_fit_function</span></code>.</p></li>
<li><p><strong>OCV</strong> – OCV measurements.</p></li>
<li><p><strong>name</strong> – Name of the material for which the OCV curve was measured.</p></li>
<li><p><strong>phases</strong> – Number of phases in the <code class="docutils literal notranslate"><span class="pre">fitting_functions.OCV_fit_function</span></code>.
The higher it is, the more (over-)fitted the model becomes.</p></li>
<li><p><strong>SOC_range_bounds</strong> – Optional hard upper and lower bounds for the SOC correction from
the left and the right side, respectively, as a 2-tuple. Use it
as a limiting guess for the actual SOC range represented in the
measurement. Has to be inside (0.0, 1.0). Set to (0.0, 1.0) to
effectively disable SOC range estimation.</p></li>
<li><p><strong>SOC_range_limits</strong> – Optional hard lower and upper bounds for the SOC correction from
the left and the right side, respectively, as a 2-tuple. Use it
if you know that your OCV data is incomplete and by how much.
Has to be inside (0.0, 1.0). Set to (0.0, 1.0) to allow the
SOC range estimation to assign datapoints to the asymptotes.</p></li>
<li><p><strong>z</strong> – The charge number of the electrode interface reaction.</p></li>
<li><p><strong>T</strong> – The temperature of the electrode.</p></li>
<li><p><strong>fit</strong> – May provide the fit parameters if they are already known.</p></li>
<li><p><strong>eval_SOC</strong> – Denotes the minimum and maximum SOC to plot the OCV curves at.</p></li>
<li><p><strong>eval_points</strong> – The number of points for plotting of the OCV curves.</p></li>
<li><p><strong>spline_SOC_range</strong> – 2-tuple giving the SOC range in which the inverted
fitting_functions.OCV_fit_function will be interpolated by a
smoothing spline. Outside of this range the spline is used for
extrapolation. Use this to fit the SOC range of interest more
precisely, since a fit of the whole range usually fails due to
the singularities at SOC 0 and 1. Please note that this range
considers the 0-1-range in which the given SOC lies and not the
linear transformation of it from the fitting process.</p></li>
<li><p><strong>spline_order</strong> – Order of this smoothing spline. If it is set to 0, this only
calculates and plots the <code class="docutils literal notranslate"><span class="pre">fitting_functions.OCV_fit_function</span></code>.</p></li>
<li><p><strong>spline_print</strong> – If set to either ‘python’ or ‘matlab’, a string representation
of the smoothing spline is printed in the respective format.</p></li>
<li><p><strong>parameters_print</strong> – Set to True if the fit parameters should be printed to console.</p></li>
<li><p><strong>inverted</strong> – If True (default), the widely adopted SOC convention is assumed.
If False, the formulation of “A parametric OCV model” is used.</p></li>
<li><p><strong>info_accuracy</strong> – If True, some measures of fit accuracy are displayed in the
figure legend: RMSE (root mean square error), MAE (mean absolute
error) and ME (maximum error).</p></li>
<li><p><strong>normalized_xaxis</strong> – If True, the x-axis gets rescaled to [0,1], where {0,1} matches
the asymptotes of the OCV fit function.</p></li>
<li><p><strong>distance_order</strong> – The argument passed to the numpy.linalg.norm of the vector of
distances between OCV data and OCV model. Default is 2, i.e.,
the Euclidean norm. 1 sets it to absolute distance.</p></li>
<li><p><strong>weights</strong> – Optional weights to apply to the vector of the distances between
OCV data and OCV model. Defaults to equal weights.</p></li>
<li><p><strong>initial_parameters</strong> – Optional initial guess for the model parameters. If left as-is,
this will be automatically gleaned from the data. Use only if
you have another fit to data of the same electrode material.</p></li>
<li><p><strong>minimize_options</strong> – Dictionary that gets passed to scipy.optimize.minimize with the
method <code class="docutils literal notranslate"><span class="pre">trust-constr</span></code>. See <code class="docutils literal notranslate"><span class="pre">scipy.optimize.show_options</span></code>
with the arguments ‘minimize’ and ‘trust-constr’ for details.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">EP-BOLFI</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">ReadMe</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="ep_bolfi.html">ep_bolfi</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="ep_bolfi.kadi_tools.html">ep_bolfi.kadi_tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="ep_bolfi.models.html">ep_bolfi.models</a></li>
<li class="toctree-l3"><a class="reference internal" href="ep_bolfi.optimization.html">ep_bolfi.optimization</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="ep_bolfi.utility.html">ep_bolfi.utility</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ep_bolfi.utility.dataset_formatting.html">ep_bolfi.utility.dataset_formatting</a></li>
<li class="toctree-l4"><a class="reference internal" href="ep_bolfi.utility.fitting_functions.html">ep_bolfi.utility.fitting_functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="ep_bolfi.utility.preprocessing.html">ep_bolfi.utility.preprocessing</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="ep_bolfi.utility.visualization.html">ep_bolfi.utility.visualization</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.bode_plot.html">ep_bolfi.utility.visualization.bode_plot</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.cc_cv_visualization.html">ep_bolfi.utility.visualization.cc_cv_visualization</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.colorline.html">ep_bolfi.utility.visualization.colorline</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">ep_bolfi.utility.visualization.fit_and_plot_OCV</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#ep_bolfi.utility.visualization.fit_and_plot_OCV"><code class="docutils literal notranslate"><span class="pre">fit_and_plot_OCV()</span></code></a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.interactive_impedance_model.html">ep_bolfi.utility.visualization.interactive_impedance_model</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.make_segments.html">ep_bolfi.utility.visualization.make_segments</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.nyquist_plot.html">ep_bolfi.utility.visualization.nyquist_plot</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.plot_ICA.html">ep_bolfi.utility.visualization.plot_ICA</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.plot_OCV_from_CC_CV.html">ep_bolfi.utility.visualization.plot_OCV_from_CC_CV</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.plot_comparison.html">ep_bolfi.utility.visualization.plot_comparison</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.plot_measurement.html">ep_bolfi.utility.visualization.plot_measurement</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.push_apart_text.html">ep_bolfi.utility.visualization.push_apart_text</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.set_fontsize.html">ep_bolfi.utility.visualization.set_fontsize</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.update_legend.html">ep_bolfi.utility.visualization.update_legend</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.update_limits.html">ep_bolfi.utility.visualization.update_limits</a></li>
<li class="toctree-l5"><a class="reference internal" href="ep_bolfi.utility.visualization.visualize_correlation.html">ep_bolfi.utility.visualization.visualize_correlation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api.html">API</a><ul>
  <li><a href="ep_bolfi.html">ep_bolfi</a><ul>
  <li><a href="ep_bolfi.utility.html">ep_bolfi.utility</a><ul>
  <li><a href="ep_bolfi.utility.visualization.html">ep_bolfi.utility.visualization</a><ul>
      <li>Previous: <a href="ep_bolfi.utility.visualization.colorline.html" title="previous chapter">ep_bolfi.utility.visualization.colorline</a></li>
      <li>Next: <a href="ep_bolfi.utility.visualization.interactive_impedance_model.html" title="next chapter">ep_bolfi.utility.visualization.interactive_impedance_model</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2022-%Y, Yannick Kuhn.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/api/ep_bolfi.utility.visualization.fit_and_plot_OCV.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>